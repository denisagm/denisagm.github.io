(function(e){function t(t){for(var n,l,s=t[0],i=t[1],u=t[2],b=0,v=[];b<s.length;b++)l=s[b],Object.prototype.hasOwnProperty.call(c,l)&&c[l]&&v.push(c[l][0]),c[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);r&&r(t);while(v.length)v.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,s=1;s<a.length;s++){var i=a[s];0!==c[i]&&(n=!1)}n&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},c={app:0},o=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var r=i;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},2415:function(e,t,a){"use strict";a("2d0b")},"2d0b":function(e,t,a){},"515f":function(e,t,a){},"6fc2":function(e,t,a){"use strict";a("515f")},8124:function(e,t,a){},a738:function(e,t,a){"use strict";a("8124")},ae0c:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);var n=a("7a23");const c={id:"app"},o=Object(n["g"])("title",null,"Planning Poker",-1);function l(e,t){const a=Object(n["C"])("router-view");return Object(n["v"])(),Object(n["f"])("div",c,[o,Object(n["j"])(a)])}a("2415");var s=a("d959"),i=a.n(s);const u={},r=i()(u,[["render",l]]);var b=r,v=a("6605"),d=(a("14d9"),a("5502"));const p={players:[],socket:{}};var O=new d["a"].Store({state:p,mutations:{setSocket(e,t){e.socket=t}},actions:{},modules:{}}),j=a("daa8");const f=e=>(Object(n["y"])("data-v-6f1ee096"),e=e(),Object(n["w"])(),e),m={class:"home"},g={class:"container"},h=f(()=>Object(n["g"])("div",{class:"free-poker-header"},[Object(n["g"])("h1",null,[Object(n["i"])("Scrum poker made simple and "),Object(n["g"])("span",null,"free"),Object(n["i"])(".")])],-1)),y={class:"start-game"},w={key:0},k={key:1,version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"24px",height:"30px",viewBox:"0 0 24 30",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},x=Object(n["h"])('<rect x="0" y="10" width="4" height="10" fill="#333" opacity="0.2" data-v-6f1ee096><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0s" dur="0.6s" repeatCount="indefinite" data-v-6f1ee096></animate><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0s" dur="0.6s" repeatCount="indefinite" data-v-6f1ee096></animate><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0s" dur="0.6s" repeatCount="indefinite" data-v-6f1ee096></animate></rect><rect x="8" y="10" width="4" height="10" fill="#333" opacity="0.2" data-v-6f1ee096><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.15s" dur="0.6s" repeatCount="indefinite" data-v-6f1ee096></animate><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" data-v-6f1ee096></animate><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" data-v-6f1ee096></animate></rect><rect x="16" y="10" width="4" height="10" fill="#333" opacity="0.2" data-v-6f1ee096><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.3s" dur="0.6s" repeatCount="indefinite" data-v-6f1ee096></animate><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" data-v-6f1ee096></animate><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" data-v-6f1ee096></animate></rect>',3),C=[x];var M=Object(n["k"])({__name:"Home",setup(e){const t=Object(n["A"])(!1),a=Object(n["A"])(!1);function c(){t.value=!0,setTimeout(()=>{a.value||alert("If it's taking more than 5 seconds, my credits have probably ran out ðŸ˜± apologies.")},5e3);const e=Object(j["a"])("https://scrum-estimates.fly.dev");O.commit("setSocket",e),O.state.socket.on("room",e=>{a.value=!0,ke.push({path:"/game/"+e})})}return(e,a)=>(Object(n["v"])(),Object(n["f"])("div",m,[Object(n["g"])("div",g,[h,Object(n["g"])("div",y,[Object(n["g"])("button",{class:Object(n["q"])(["button",{disabled:t.value}]),onClick:a[0]||(a[0]=e=>c())},[t.value?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("span",w,"Create room")),t.value?(Object(n["v"])(),Object(n["f"])("svg",k,C)):Object(n["e"])("",!0)],2)])])]))}});a("ee6c");const L=i()(M,[["__scopeId","data-v-6f1ee096"]]);var _=L;const I=e=>(Object(n["y"])("data-v-2899faae"),e=e(),Object(n["w"])(),e),H={class:"modal-container"},P={class:"modal"},S={for:"selectNameInput"},A={class:"input-container"},N=["onKeypress"],T=I(()=>Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},[Object(n["g"])("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(n["g"])("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})],-1)),V=[T];var z=Object(n["k"])({__name:"Modal",props:{title:{}},emits:["completed"],setup(e,{emit:t}){const a=Object(n["A"])("");function c(){t("completed",a.value)}return Object(n["t"])(()=>{const e=document.getElementById("selectNameInput");e&&e.focus()}),(e,t)=>(Object(n["v"])(),Object(n["f"])("div",H,[Object(n["g"])("div",P,[Object(n["g"])("span",null,[Object(n["g"])("label",S,Object(n["F"])(e.title),1)]),Object(n["g"])("div",A,[Object(n["J"])(Object(n["g"])("input",{type:"text",id:"selectNameInput","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),class:"input",maxlength:"20",onKeypress:Object(n["K"])(c,["enter"])},null,40,N),[[n["H"],a.value]]),Object(n["g"])("button",{class:"enter-button",type:"submit",onClick:c,"aria-label":"Use name"},V)])])]))}});a("a738");const F=i()(z,[["__scopeId","data-v-2899faae"]]);var X=F;const q=e=>(Object(n["y"])("data-v-50366a5c"),e=e(),Object(n["w"])(),e),B=q(()=>Object(n["g"])("h1",{class:"screen-reader-only"},"Planfree.dev game lobby",-1)),G={key:1,class:"home"},Z={class:"top-buttons"},E=q(()=>Object(n["g"])("div",null,[Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},[Object(n["g"])("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(n["g"])("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})])],-1)),J=q(()=>Object(n["g"])("div",null,"Invite players",-1)),K=q(()=>Object(n["g"])("div",null,[Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},[Object(n["g"])("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(n["g"])("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})])],-1)),Q=[J,K],U={key:1,class:"button invite copied no-hover"},D=q(()=>Object(n["g"])("div",null,"Copied to clipboard",-1)),$=q(()=>Object(n["g"])("div",null,null,-1)),R=[D,$],W={class:"top-left-buttons"},Y=q(()=>Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20"},[Object(n["g"])("path",{d:"M7.333 14.896 10 13.312l2.688 1.584-.709-3 2.313-1.979-3.063-.271L10 6.792 8.771 9.646l-3.063.271 2.334 1.979ZM5.062 18l1.313-5.542L2 8.729l5.75-.5L10 3l2.25 5.25 5.75.479-4.375 3.729L14.938 18 10 15.062ZM10 11.062Z"})],-1)),ee=[Y],te=q(()=>Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20"},[Object(n["g"])("path",{d:"M7 17v-2H3.5q-.625 0-1.062-.438Q2 14.125 2 13.5v-9q0-.625.438-1.062Q2.875 3 3.5 3H11v1.5H3.5v9h13V11H18v2.5q0 .625-.438 1.062Q17.125 15 16.5 15H13v2Zm7.479-6L11 7.521l1.062-1.063 1.688 1.688V3h1.5v5.104l1.688-1.687L18 7.479Z"})],-1)),ae=[te],ne={key:0,class:"button no-hover"},ce=q(()=>Object(n["g"])("span",null,"Cast your votes",-1)),oe=[ce],le=q(()=>Object(n["g"])("span",null,"Show votes!",-1)),se=[le],ie=q(()=>Object(n["g"])("span",null,"Start new game!",-1)),ue=[ie],re={key:3,class:"button no-hover"},be={key:0},ve={class:"name"},de={key:4,class:"options"},pe=["onClick","disabled"],Oe={key:5,class:"results-container"},je={class:"results"},fe={class:"average"},me={class:"popular"};var ge=Object(n["k"])({__name:"Game",setup(e){let t=Object(n["A"])(!1);const a=Object(n["A"])(!0),c=Object(n["A"])(!1),o=Object(n["A"])(!1),l=Object(n["A"])(0),s=Object(n["A"])(null),i=Object(n["A"])(""),u=Object(n["A"])(null);let r;function b(){r.prompt()}function d(){O.state.socket.emit("show")}function p(){return O.state.players}function f(e){O.state.socket.emit("vote",e),u.value=e}function m(){O.state.socket.emit("restart")}function g(e){O.state.socket.emit("name",e)}function h(e){i.value=e,g(e),localStorage.setItem("name",e),a.value=!1}function y(){const e=O.state.players;return e.filter(e=>null!==e.vote&&void 0!==e.vote).length>0}function w(){const e=document.createElement("input");e.value=window.location.href,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),o.value=!0,setTimeout(()=>o.value=!1,3e3)}function k(){const e=O.state.players;let t=0,a=0;for(const n of e)n.vote&&"?"!==n.vote&&(a+=parseInt(n.vote),t++);return(a/t).toFixed(1).replace(/\.0+$/,"")}function x(){const e=O.state.players,t={};for(const c of e)c.vote&&(t[c.vote]?t[c.vote]=t[c.vote]+1:t[c.vote]=1);let a=1,n="";for(const c in t){const e=t[c];e>a&&(a=e,n=c)}return 1==a?"NA":n}function C(){open("https://github.com/denisagm/denisagm.github.io")}function M(){const e=O.state.socket;return e&&0===Object.keys(e).length&&e.constructor===Object}function L(){O.state.socket.on("connect",()=>{const e=localStorage.getItem("name");e&&h(e)}),O.state.socket.on("update",e=>{O.state.players=e}),O.state.socket.on("show",()=>{c.value=!0,clearInterval(s.value),l.value=3,s.value=setInterval(()=>{l.value-=1,0==l.value&&clearInterval(s.value)},1e3)}),O.state.socket.on("restart",()=>{c.value=!1,u.value=null}),O.state.socket.on("ping",()=>{O.state.socket.emit("pong")})}return window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),r=e,t.value=!0}),Object(n["t"])(()=>{if(M()){const e=Object(v["c"])(),t=Object(j["a"])("https://scrum-estimates.fly.dev",{transports:["websocket"],rememberUpgrade:!0,query:{roomId:e.params.id}});O.commit("setSocket",t)}const e=localStorage.getItem("name");e&&h(e),L()}),(e,s)=>(Object(n["v"])(),Object(n["f"])("div",null,[B,a.value?(Object(n["v"])(),Object(n["d"])(X,{key:0,title:"Choose your display name",onCompleted:h})):Object(n["e"])("",!0),a.value?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("div",G,[Object(n["g"])("div",Z,[Object(n["g"])("button",{class:"edit-name-button",onClick:s[0]||(s[0]=e=>a.value=!0)},[Object(n["g"])("div",null,Object(n["F"])(i.value),1),E]),o.value?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("button",{key:0,class:"button invite",onClick:s[1]||(s[1]=e=>w())},Q)),!a.value&&o.value?(Object(n["v"])(),Object(n["f"])("button",U,R)):Object(n["e"])("",!0)]),Object(n["g"])("div",W,[Object(n["g"])("button",{class:"star-button",onClick:s[2]||(s[2]=e=>C()),"aria-label":"Go to the GitHub repository"},ee),Object(n["G"])(t)?(Object(n["v"])(),Object(n["f"])("button",{key:0,class:"star-button",onClick:s[3]||(s[3]=e=>b()),"aria-label":"Add to homescreen"},ae)):Object(n["e"])("",!0)]),y()||c.value?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("button",ne,oe)),y()&&!c.value?(Object(n["v"])(),Object(n["f"])("button",{key:1,class:"button",onClick:s[4]||(s[4]=e=>d())},se)):Object(n["e"])("",!0),c.value&&0===l.value?(Object(n["v"])(),Object(n["f"])("button",{key:2,class:"button start",onClick:s[5]||(s[5]=e=>m())},ue)):Object(n["e"])("",!0),c.value&&l.value>0?(Object(n["v"])(),Object(n["f"])("button",re,[Object(n["g"])("span",null,Object(n["F"])(l.value),1)])):Object(n["e"])("",!0),(Object(n["v"])(!0),Object(n["f"])(n["a"],null,Object(n["B"])(p(),e=>(Object(n["v"])(),Object(n["f"])("div",{class:"players",key:e.id},[Object(n["g"])("div",{class:Object(n["q"])(["player",{voted:e.vote}])},[c.value&&0===l.value?(Object(n["v"])(),Object(n["f"])("span",be,Object(n["F"])(e.vote),1)):Object(n["e"])("",!0)],2),Object(n["g"])("div",ve,[Object(n["g"])("span",null,Object(n["F"])(e.name),1)])]))),128)),!c.value||c.value&&0!==l.value?(Object(n["v"])(),Object(n["f"])("div",de,[(Object(n["v"])(),Object(n["f"])(n["a"],null,Object(n["B"])(["0","1","2","3","5","8","13","21","34","55","89","?"],e=>Object(n["g"])("button",{key:"vote-"+e,class:Object(n["q"])(["fib-button",{current:u.value===e}]),onClick:t=>f(e),disabled:u.value===e},[Object(n["g"])("span",null,Object(n["F"])(e),1)],10,pe)),64))])):Object(n["e"])("",!0),c.value&&0===l.value?(Object(n["v"])(),Object(n["f"])("div",Oe,[Object(n["g"])("div",je,[Object(n["g"])("div",fe,"Average: "+Object(n["F"])(k()),1),Object(n["g"])("div",me,"Popular: "+Object(n["F"])(x()),1)])])):Object(n["e"])("",!0)]))]))}});a("6fc2");const he=i()(ge,[["__scopeId","data-v-50366a5c"]]);var ye=he;const we=Object(v["a"])({history:Object(v["b"])(),routes:[{path:"/",name:"Home",component:_,meta:{auth:!1,title:"Planning Poker"}},{path:"/game/:id",name:"Game",component:ye,meta:{auth:!1,title:"Planning Poker"}}]});var ke=we;const xe=Object(n["c"])(b);xe.use(ke),xe.use(O),xe.mount("#planfree")},ee6c:function(e,t,a){"use strict";a("ae0c")}});
//# sourceMappingURL=app.548db268.js.map