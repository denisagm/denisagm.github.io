(function(e){function t(t){for(var n,s,l=t[0],i=t[1],r=t[2],b=0,v=[];b<l.length;b++)s=l[b],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&v.push(c[s][0]),c[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(v.length)v.shift()();return o.push.apply(o,r||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,l=1;l<a.length;l++){var i=a[l];0!==c[i]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},c={app:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var r=0;r<l.length;r++)t(l[r]);var u=i;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},2415:function(e,t,a){"use strict";a("2d0b")},"2d0b":function(e,t,a){},"732a":function(e,t,a){},8124:function(e,t,a){},"908d":function(e,t,a){},a738:function(e,t,a){"use strict";a("8124")},b74a:function(e,t,a){"use strict";a("908d")},cd49:function(e,t,a){"use strict";a.r(t);var n=a("7a23");const c={id:"app"},o=Object(n["g"])("title",null,"Planning Poker",-1);function s(e,t){const a=Object(n["C"])("router-view");return Object(n["v"])(),Object(n["f"])("div",c,[o,Object(n["j"])(a)])}a("2415");var l=a("d959"),i=a.n(l);const r={},u=i()(r,[["render",s]]);var b=u,v=a("6605"),d=(a("14d9"),a("5502"));const p={players:[],socket:{}};var O=new d["a"].Store({state:p,mutations:{setSocket(e,t){e.socket=t}},actions:{},modules:{}}),j=a("daa8");const m=e=>(Object(n["y"])("data-v-17538b96"),e=e(),Object(n["w"])(),e),g={class:"home"},f={class:"container"},h=m(()=>Object(n["g"])("div",{class:"free-poker-header"},[Object(n["g"])("h1",null,[Object(n["i"])("Scrum poker made simple and "),Object(n["g"])("span",null,"free"),Object(n["i"])(".")])],-1)),y={class:"start-game"},w={key:0},k={key:1,version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"24px",height:"30px",viewBox:"0 0 24 30",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},x=Object(n["h"])('<rect x="0" y="10" width="4" height="10" fill="#333" opacity="0.2" data-v-17538b96><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0s" dur="0.6s" repeatCount="indefinite" data-v-17538b96></animate><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0s" dur="0.6s" repeatCount="indefinite" data-v-17538b96></animate><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0s" dur="0.6s" repeatCount="indefinite" data-v-17538b96></animate></rect><rect x="8" y="10" width="4" height="10" fill="#333" opacity="0.2" data-v-17538b96><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.15s" dur="0.6s" repeatCount="indefinite" data-v-17538b96></animate><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" data-v-17538b96></animate><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" data-v-17538b96></animate></rect><rect x="16" y="10" width="4" height="10" fill="#333" opacity="0.2" data-v-17538b96><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.3s" dur="0.6s" repeatCount="indefinite" data-v-17538b96></animate><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" data-v-17538b96></animate><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" data-v-17538b96></animate></rect>',3),C=[x];var M=Object(n["k"])({__name:"Home",setup(e){const t=Object(n["A"])(!1),a=Object(n["A"])(!1);function c(){t.value=!0,setTimeout(()=>{a.value||alert("If it's taking more than 5 seconds, my credits have probably ran out ðŸ˜± apologies.")},5e3);const e=Object(j["a"])("https://scrum-estimates.fly.dev");O.commit("setSocket",e),O.state.socket.on("room",e=>{console.log("received room - id:",e),a.value=!0,ke.push({path:"/game/"+e})})}return(e,a)=>(Object(n["v"])(),Object(n["f"])("div",g,[Object(n["g"])("div",f,[h,Object(n["g"])("div",y,[Object(n["g"])("button",{class:Object(n["q"])(["button",{disabled:t.value}]),onClick:a[0]||(a[0]=e=>c())},[t.value?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("span",w,"Create room")),t.value?(Object(n["v"])(),Object(n["f"])("svg",k,C)):Object(n["e"])("",!0)],2)])])]))}});a("de9f");const L=i()(M,[["__scopeId","data-v-17538b96"]]);var _=L;const I=e=>(Object(n["y"])("data-v-2899faae"),e=e(),Object(n["w"])(),e),H={class:"modal-container"},P={class:"modal"},S={for:"selectNameInput"},A={class:"input-container"},N=["onKeypress"],T=I(()=>Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},[Object(n["g"])("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(n["g"])("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})],-1)),V=[T];var z=Object(n["k"])({__name:"Modal",props:{title:{}},emits:["completed"],setup(e,{emit:t}){const a=Object(n["A"])("");function c(){t("completed",a.value)}return Object(n["t"])(()=>{const e=document.getElementById("selectNameInput");e&&e.focus()}),(e,t)=>(Object(n["v"])(),Object(n["f"])("div",H,[Object(n["g"])("div",P,[Object(n["g"])("span",null,[Object(n["g"])("label",S,Object(n["F"])(e.title),1)]),Object(n["g"])("div",A,[Object(n["J"])(Object(n["g"])("input",{type:"text",id:"selectNameInput","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),class:"input",maxlength:"20",onKeypress:Object(n["K"])(c,["enter"])},null,40,N),[[n["H"],a.value]]),Object(n["g"])("button",{class:"enter-button",type:"submit",onClick:c,"aria-label":"Use name"},V)])])]))}});a("a738");const F=i()(z,[["__scopeId","data-v-2899faae"]]);var X=F;const q=e=>(Object(n["y"])("data-v-67203a33"),e=e(),Object(n["w"])(),e),B=q(()=>Object(n["g"])("h1",{class:"screen-reader-only"},"Planfree.dev game lobby",-1)),G={key:1,class:"home"},Z={class:"top-buttons"},E=q(()=>Object(n["g"])("div",null,[Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},[Object(n["g"])("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(n["g"])("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})])],-1)),J=q(()=>Object(n["g"])("div",null,"Invite players",-1)),K=q(()=>Object(n["g"])("div",null,[Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},[Object(n["g"])("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(n["g"])("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})])],-1)),Q=[J,K],U={key:1,class:"button invite copied no-hover"},D=q(()=>Object(n["g"])("div",null,"Copied to clipboard",-1)),$=q(()=>Object(n["g"])("div",null,null,-1)),R=[D,$],W={class:"top-left-buttons"},Y=q(()=>Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20"},[Object(n["g"])("path",{d:"M7.333 14.896 10 13.312l2.688 1.584-.709-3 2.313-1.979-3.063-.271L10 6.792 8.771 9.646l-3.063.271 2.334 1.979ZM5.062 18l1.313-5.542L2 8.729l5.75-.5L10 3l2.25 5.25 5.75.479-4.375 3.729L14.938 18 10 15.062ZM10 11.062Z"})],-1)),ee=[Y],te=q(()=>Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20"},[Object(n["g"])("path",{d:"M7 17v-2H3.5q-.625 0-1.062-.438Q2 14.125 2 13.5v-9q0-.625.438-1.062Q2.875 3 3.5 3H11v1.5H3.5v9h13V11H18v2.5q0 .625-.438 1.062Q17.125 15 16.5 15H13v2Zm7.479-6L11 7.521l1.062-1.063 1.688 1.688V3h1.5v5.104l1.688-1.687L18 7.479Z"})],-1)),ae=[te],ne={key:0,class:"button no-hover"},ce=q(()=>Object(n["g"])("span",null,"Cast your votes",-1)),oe=[ce],se=q(()=>Object(n["g"])("span",null,"Show votes!",-1)),le=[se],ie=q(()=>Object(n["g"])("span",null,"Start new game!",-1)),re=[ie],ue={key:3,class:"button no-hover"},be={key:0},ve={class:"name"},de={key:4,class:"options"},pe=["onClick","disabled"],Oe={key:5,class:"results-container"},je={class:"results"},me={class:"average"},ge={class:"popular"};var fe=Object(n["k"])({__name:"Game",setup(e){let t=Object(n["A"])(!1);const a=Object(n["A"])(!0),c=Object(n["A"])(!1),o=Object(n["A"])(!1),s=Object(n["A"])(0),l=Object(n["A"])(null),i=Object(n["A"])(""),r=Object(n["A"])(null);let u;function b(){u.prompt()}function d(){O.state.socket.emit("show")}function p(){return O.state.players}function m(e){O.state.socket.emit("vote",e),r.value=e}function g(){O.state.socket.emit("restart")}function f(e){O.state.socket.emit("name",e)}function h(e){i.value=e,f(e),localStorage.setItem("name",e),a.value=!1}function y(){const e=O.state.players;return e.filter(e=>null!==e.vote&&void 0!==e.vote).length>0}function w(){const e=document.createElement("input");e.value=window.location.href,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),o.value=!0,setTimeout(()=>o.value=!1,3e3)}function k(){const e=O.state.players;let t=0,a=0;for(const n of e)n.vote&&"?"!==n.vote&&(a+=parseInt(n.vote),t++);return(a/t).toFixed(1).replace(/\.0+$/,"")}function x(){const e=O.state.players,t={};for(const c of e)c.vote&&(t[c.vote]?t[c.vote]=t[c.vote]+1:t[c.vote]=1);let a=1,n="";for(const c in t){const e=t[c];e>a&&(a=e,n=c)}return 1==a?"NA":n}function C(){open("https://github.com/denisagm/denisagm.github.io")}function M(){const e=O.state.socket;return e&&0===Object.keys(e).length&&e.constructor===Object}function L(){O.state.socket.on("connect",()=>{const e=localStorage.getItem("name");console.log("received connect"),e&&h(e)}),O.state.socket.on("disconnect",e=>{console.log("received disconnect because reason:",e)}),O.state.socket.on("update",e=>{console.log("received update - players:",e),O.state.players=e}),O.state.socket.on("show",()=>{console.log("received show"),c.value=!0,clearInterval(l.value),s.value=3,l.value=setInterval(()=>{s.value-=1,0==s.value&&clearInterval(l.value)},1e3)}),O.state.socket.on("restart",()=>{console.log("received restart"),c.value=!1,r.value=null}),O.state.socket.on("ping",()=>{console.log("received ping / emit pong"),O.state.socket.emit("pong")})}return window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),u=e,t.value=!0}),Object(n["t"])(()=>{if(M()){const e=Object(v["c"])();console.log("mounted - route.params:",e.params);const t=Object(j["a"])("https://scrum-estimates.fly.dev",{transports:["websocket"],rememberUpgrade:!0,query:{roomId:e.params.id}});O.commit("setSocket",t)}const e=localStorage.getItem("name");e&&h(e),L()}),(e,l)=>(Object(n["v"])(),Object(n["f"])("div",null,[B,a.value?(Object(n["v"])(),Object(n["d"])(X,{key:0,title:"Choose your display name",onCompleted:h})):Object(n["e"])("",!0),a.value?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("div",G,[Object(n["g"])("div",Z,[Object(n["g"])("button",{class:"edit-name-button",onClick:l[0]||(l[0]=e=>a.value=!0)},[Object(n["g"])("div",null,Object(n["F"])(i.value),1),E]),o.value?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("button",{key:0,class:"button invite",onClick:l[1]||(l[1]=e=>w())},Q)),!a.value&&o.value?(Object(n["v"])(),Object(n["f"])("button",U,R)):Object(n["e"])("",!0)]),Object(n["g"])("div",W,[Object(n["g"])("button",{class:"star-button",onClick:l[2]||(l[2]=e=>C()),"aria-label":"Go to the GitHub repository"},ee),Object(n["G"])(t)?(Object(n["v"])(),Object(n["f"])("button",{key:0,class:"star-button",onClick:l[3]||(l[3]=e=>b()),"aria-label":"Add to homescreen"},ae)):Object(n["e"])("",!0)]),y()||c.value?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("button",ne,oe)),y()&&!c.value?(Object(n["v"])(),Object(n["f"])("button",{key:1,class:"button",onClick:l[4]||(l[4]=e=>d())},le)):Object(n["e"])("",!0),c.value&&0===s.value?(Object(n["v"])(),Object(n["f"])("button",{key:2,class:"button start",onClick:l[5]||(l[5]=e=>g())},re)):Object(n["e"])("",!0),c.value&&s.value>0?(Object(n["v"])(),Object(n["f"])("button",ue,[Object(n["g"])("span",null,Object(n["F"])(s.value),1)])):Object(n["e"])("",!0),(Object(n["v"])(!0),Object(n["f"])(n["a"],null,Object(n["B"])(p(),e=>(Object(n["v"])(),Object(n["f"])("div",{class:"players",key:e.id},[Object(n["g"])("div",{class:Object(n["q"])(["player",{voted:e.vote}])},[c.value&&0===s.value?(Object(n["v"])(),Object(n["f"])("span",be,Object(n["F"])(e.vote),1)):Object(n["e"])("",!0)],2),Object(n["g"])("div",ve,[Object(n["g"])("span",null,Object(n["F"])(e.name),1)])]))),128)),!c.value||c.value&&0!==s.value?(Object(n["v"])(),Object(n["f"])("div",de,[(Object(n["v"])(),Object(n["f"])(n["a"],null,Object(n["B"])(["0","1","2","3","5","8","13","21","34","55","89","?"],e=>Object(n["g"])("button",{key:"vote-"+e,class:Object(n["q"])(["fib-button",{current:r.value===e}]),onClick:t=>m(e),disabled:r.value===e},[Object(n["g"])("span",null,Object(n["F"])(e),1)],10,pe)),64))])):Object(n["e"])("",!0),c.value&&0===s.value?(Object(n["v"])(),Object(n["f"])("div",Oe,[Object(n["g"])("div",je,[Object(n["g"])("div",me,"Average: "+Object(n["F"])(k()),1),Object(n["g"])("div",ge,"Popular: "+Object(n["F"])(x()),1)])])):Object(n["e"])("",!0)]))]))}});a("b74a");const he=i()(fe,[["__scopeId","data-v-67203a33"]]);var ye=he;const we=Object(v["a"])({history:Object(v["b"])(),routes:[{path:"/",name:"Home",component:_,meta:{auth:!1,title:"Planning Poker"}},{path:"/game/:id",name:"Game",component:ye,meta:{auth:!1,title:"Planning Poker"}}]});var ke=we;const xe=Object(n["c"])(b);xe.use(ke),xe.use(O),xe.mount("#planfree")},de9f:function(e,t,a){"use strict";a("732a")}});
//# sourceMappingURL=app.03126dbf.js.map